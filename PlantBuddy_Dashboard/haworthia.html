<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Haworthia â€“ Live Data</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f4faf2;
    padding: 20px;
  }

  .back {
    display: inline-block;
    margin-bottom: 20px;
    font-size: 18px;
    color: #2d6a33;
    text-decoration: none;
    font-weight: bold;
  }

  h1 {
    text-align: center;
    color: #3d8b40;
    margin-bottom: 20px;
  }

  .data-container {
    max-width: 700px;
    margin: auto;
  }

  .card {
    background: white;
    padding: 20px;
    border-radius: 14px;
    margin-bottom: 20px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.12);
  }

  .card h2 {
    margin-bottom: 12px;
    color: #4caf50;
  }

  .row {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    font-size: 18px;
  }

  .label {
    font-weight: bold;
  }

  .ai-box {
    background: #e7f7e8;
    border-left: 6px solid #4caf50;
  }
</style>

</head>
</script>

<body>

<a class="back" href="index.html">â¬… Back to Dashboard</a>

<h1>ðŸŒ± Haworthia â€“ Live Data</h1>

<div class="data-container">

  <!-- Sensor Values -->
  <div class="card">
    <h2>Sensor Readings</h2>
    <div class="row"><span class="label">Soil Moisture:</span> <span id="soil">--</span></div>
    <div class="row"><span class="label">Light (lux):</span> <span id="light">--</span></div>
    <div class="row"><span class="label">Temperature (Â°C):</span> <span id="temp">--</span></div>
    <div class="row"><span class="label">Humidity (%):</span> <span id="humidity">--</span></div>
    <div class="row"><span class="label">Pump:</span> <span id="pump">--</span></div>
    <div class="row"><span class="label">Condition:</span> <span id="condition">--</span></div>
  </div>

  <!-- AI Prediction -->
  <div class="card ai-box">
    <h2>AI Classification (Edge Impulse)</h2>
    <div class="row"><span class="label">Prediction:</span> <span id="ai-label">--</span></div>
    <div class="row"><span class="label">Confidence:</span> <span id="ai-conf">--</span></div>
  </div>

  <!-- Chart Placeholder -->
  <div class="card">
    <h2>Moisture History</h2>
    <p style="text-align:center; color:#666;">(Chart will be added later)</p>
  </div>

</div>
<script>
  async function loadData() {
    try {
      const res = await fetch("http://127.0.0.1:5000/latest?plant=haworthia");
      const data = await res.json();

      document.getElementById("soil").textContent = data.soil;
      document.getElementById("light").textContent = data.light;
      document.getElementById("temp").textContent = data.temp;
      document.getElementById("humidity").textContent = data.humidity;
      document.getElementById("pump").textContent = data.pump === 1 ? "ON" : "OFF";
      document.getElementById("condition").textContent = data.condition;
    } catch (err) {
      console.log("Error fetching live data:", err);
    }
  }

  setInterval(loadData, 2000);
  loadData();
</script>
</body>
</html>
